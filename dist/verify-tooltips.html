<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tooltip Verification</title>
    <script>
        function checkTooltipImplementation() {
            const results = document.getElementById('results');
            let html = '<h2>Tooltip Implementation Check</h2>';
            
            // 1. Check if tooltips are wrapped
            const tooltips = document.querySelectorAll('.tooltip-custom');
            html += `<h3>1. Technical terms wrapped in .tooltip-custom spans: ${tooltips.length > 0 ? '✓' : '✗'}</h3>`;
            html += `<p>Found ${tooltips.length} tooltip elements</p>`;
            
            if (tooltips.length > 0) {
                html += '<ul>';
                tooltips.forEach((tooltip, i) => {
                    html += `<li>Tooltip ${i+1}: "${tooltip.textContent}"</li>`;
                });
                html += '</ul>';
            }
            
            // 2. Check data-tooltip attributes
            let tooltipsWithData = 0;
            tooltips.forEach(tooltip => {
                if (tooltip.hasAttribute('data-tooltip')) {
                    tooltipsWithData++;
                }
            });
            
            html += `<h3>2. Data-tooltip attributes present: ${tooltipsWithData === tooltips.length && tooltips.length > 0 ? '✓' : '✗'}</h3>`;
            html += `<p>${tooltipsWithData} out of ${tooltips.length} tooltips have data-tooltip attributes</p>`;
            
            // 3. Check CSS presence
            const styles = getComputedStyle(document.documentElement);
            const hasTooltipStyles = false;
            
            // Try to find tooltip styles in stylesheets
            for (let sheet of document.styleSheets) {
                try {
                    for (let rule of sheet.cssRules || sheet.rules) {
                        if (rule.selectorText && rule.selectorText.includes('.tooltip-custom')) {
                            hasTooltipStyles = true;
                            break;
                        }
                    }
                } catch(e) {
                    // Cross-origin stylesheets might throw
                }
            }
            
            html += `<h3>3. Tooltip CSS styles loaded: ${hasTooltipStyles ? '✓' : '✗'}</h3>`;
            
            // 4. Check hover functionality (simulated)
            if (tooltips.length > 0) {
                const firstTooltip = tooltips[0];
                const pseudoContent = window.getComputedStyle(firstTooltip, '::after');
                const hasHoverStyles = pseudoContent.content !== 'none';
                
                html += `<h3>4. Hover functionality (CSS pseudo-element): ${hasHoverStyles ? '✓' : '✗'}</h3>`;
                
                // Check positioning
                html += '<h4>Tooltip positioning check:</h4>';
                html += `<p>Bottom position: ${pseudoContent.bottom || 'not set'}</p>`;
                html += `<p>Transform: ${pseudoContent.transform || 'not set'}</p>`;
            }
            
            // Look for technical terms in the content
            const technicalTerms = ['TypeScript', 'IaC', 'Output', 'Stack', 'Component Resource'];
            const content = document.body.textContent;
            
            html += '<h3>5. Technical terms found in content:</h3><ul>';
            technicalTerms.forEach(term => {
                const found = content.includes(term);
                html += `<li>${term}: ${found ? '✓' : '✗'}</li>`;
            });
            html += '</ul>';
            
            // Check if JavaScript is trying to apply tooltips
            html += '<h3>6. JavaScript tooltip implementation:</h3>';
            html += '<p>Check console for any JavaScript errors that might prevent tooltip application.</p>';
            
            results.innerHTML = html;
        }
        
        // Run check when iframe loads
        function checkIframe() {
            const iframe = document.getElementById('targetPage');
            iframe.onload = function() {
                // Check the main page
                setTimeout(() => {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const tooltips = iframeDoc.querySelectorAll('.tooltip-custom');
                    
                    const status = document.getElementById('iframe-status');
                    status.innerHTML = `<h3>Tooltips in index.html: ${tooltips.length}</h3>`;
                    
                    if (tooltips.length > 0) {
                        let details = '<ul>';
                        tooltips.forEach((tooltip, i) => {
                            details += `<li>Term: "${tooltip.textContent}", Definition: "${tooltip.getAttribute('data-tooltip')}"</li>`;
                        });
                        details += '</ul>';
                        status.innerHTML += details;
                    } else {
                        status.innerHTML += '<p style="color: red;">No tooltips found! JavaScript may not be executing properly.</p>';
                        
                        // Check for technical terms
                        const terms = ['TypeScript', 'IaC', 'Output', 'Stack', 'Component Resource'];
                        let termsFound = 0;
                        terms.forEach(term => {
                            if (iframeDoc.body.textContent.includes(term)) {
                                termsFound++;
                            }
                        });
                        status.innerHTML += `<p>Technical terms found in content: ${termsFound}/${terms.length}</p>`;
                    }
                }, 2000); // Give JavaScript time to execute
            };
        }
    </script>
</head>
<body>
    <h1>Tooltip Implementation Verification</h1>
    
    <div id="results"></div>
    
    <h2>Live Page Check:</h2>
    <div id="iframe-status"></div>
    <iframe id="targetPage" src="index.html" style="width: 100%; height: 400px; border: 1px solid #ccc;"></iframe>
    
    <script>
        checkTooltipImplementation();
        checkIframe();
    </script>
</body>
</html>